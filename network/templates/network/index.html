{% extends "network/layout.html" %}
{% load static %}
{% block body %}
    <div class="container-lg">

        <h3 class="display-4 mb-4 text-center">All Posts</h3>

        <form action="/create-post" method="post">
            {% csrf_token %}
            <div class="form-floating">
                <label for="content" class="h4">New Post</label>
                <textarea name="content" id="content" class="form-control" placeholder="Write something..."></textarea>
            </div>
            <button class="btn btn-primary mt-3" id="submit" type="submit" disabled>Post</button>
        </form>
      
        <div class="row justify-content-center align-items-center my-5">
            <div class="col-12">
                {% for post in posts %}
                <div class="card" style="width: 100%;">
                    <div class="card-body">
                      <h5 class="card-title"><a class="text-dark" href="{% url 'profile_view' post.user %}"><strong>{{post.user}}</strong></a></h5>
                      <h6 class="card-subtitle mb-4 text-muted">{{ post.created_at }}</h6>
                      <p class="card-text">{{ post.content }}</p>
                      <input id="post_id" type="hidden" value="{{ post.id }}">
                    {% if user.is_authenticated %}
                        <input id="user" type="hidden" value="{{ user.username }}">
                       
                        <span id="like_count">{{ post.likes }}</span>
                        {% if likes %}
                         {% for like in likes %}
                         {% if user.username == like.user %}<i id="heart" class="bi bi-heart-fill"></i> {% else %}<i id="heart" class="bi bi-heart"></i>{% endif %}<br>
                        {% endfor %}
                        {% else %}
                        <i id="heart" class="bi bi-heart"></i><br>
                        {% endif %}
                    {% endif %}
                        <button type="button" id="like" class=" btn btn-outline-primary">Like</button> 
                        <a href="#" class="card-link">Comment</a>
                        <a href="#" class="card-link">Edit</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- Like feature -->
    <script src="{% static 'network/like.js' %}"></script>
   
{% endblock %}